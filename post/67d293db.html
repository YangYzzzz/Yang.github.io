<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>『数据库系统』与爱同航——系统实现文档 | Yang's CS World</title><meta name="author" content="Yang"><meta name="copyright" content="Yang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="『数据库系统』与爱同航——系统实现文档系统实现文档一、实现环境1.1 客户端环境依赖12345678910111213141516171819202122232425262728&#123;  &quot;name&quot;: &quot;vue3&quot;,  &quot;version&quot;: &quot;0.0.0&quot;,  &quot;private&quot;: true">
<meta property="og:type" content="article">
<meta property="og:title" content="『数据库系统』与爱同航——系统实现文档">
<meta property="og:url" content="https://yangyzzzz.github.io/post/67d293db.html">
<meta property="og:site_name" content="Yang&#39;s CS World">
<meta property="og:description" content="『数据库系统』与爱同航——系统实现文档系统实现文档一、实现环境1.1 客户端环境依赖12345678910111213141516171819202122232425262728&#123;  &quot;name&quot;: &quot;vue3&quot;,  &quot;version&quot;: &quot;0.0.0&quot;,  &quot;private&quot;: true">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://yangyzzzz.github.io/img/91942417_p0_master1800.jpeg">
<meta property="article:published_time" content="2024-10-12T10:01:17.000Z">
<meta property="article:modified_time" content="2024-10-12T11:03:23.784Z">
<meta property="article:author" content="Yang">
<meta property="article:tag" content="数据库系统">
<meta property="article:tag" content="软件工程">
<meta property="article:tag" content="前后端开发">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://yangyzzzz.github.io/img/91942417_p0_master1800.jpeg"><link rel="shortcut icon" href="/img/avatar.jpeg"><link rel="canonical" href="https://yangyzzzz.github.io/post/67d293db.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?d431d91edffce9d7bd7ade045956b24b";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":5,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":10000,"languages":{"author":"作者: Yang","link":"链接: ","source":"来源: Yang's CS World","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '『数据库系统』与爱同航——系统实现文档',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-12 19:03:23'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/light.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/windmill.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/universe.css"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.2.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/91942417_p0_master1800.jpeg')"><nav id="nav"><span id="blog-info"><a href="/" title="Yang's CS World"></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/artitalk/"><i class="fa-fw fas fa-comments"></i><span> 说说</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">『数据库系统』与爱同航——系统实现文档</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-10-12T10:01:17.000Z" title="发表于 2024-10-12 18:01:17">2024-10-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-10-12T11:03:23.784Z" title="更新于 2024-10-12 19:03:23">2024-10-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/">计算机科学</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/">数据库系统</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>42分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="『数据库系统』与爱同航——系统实现文档"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/post/67d293db.html#post-comment"><span class="gitalk-comment-count"><i class="fa-solid fa-spinner fa-spin"></i></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="『数据库系统』与爱同航——系统实现文档"><a href="#『数据库系统』与爱同航——系统实现文档" class="headerlink" title="『数据库系统』与爱同航——系统实现文档"></a>『数据库系统』与爱同航——系统实现文档</h1><h1 id="系统实现文档"><a href="#系统实现文档" class="headerlink" title="系统实现文档"></a>系统实现文档</h1><h2 id="一、实现环境"><a href="#一、实现环境" class="headerlink" title="一、实现环境"></a>一、实现环境</h2><h3 id="1-1-客户端环境依赖"><a href="#1-1-客户端环境依赖" class="headerlink" title="1.1 客户端环境依赖"></a>1.1 客户端环境依赖</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vue3&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;private&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite build&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;preview&quot;</span><span class="punctuation">:</span> <span class="string">&quot;vite preview&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;eslint . --ext .vue,.js,.jsx,.cjs,.mjs --fix --ignore-path .gitignore&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@element-plus/icons-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;axios&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^1.5.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;element-plus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.3.14&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;mavon-editor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.10.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;echarts&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^5.4.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;pinia&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^2.1.6&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;undraw-ui&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^0.9.9&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^3.3.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vue-router&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.2.4&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;@vitejs/plugin-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.3.4&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^8.49.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;eslint-plugin-vue&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^9.17.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;vite&quot;</span><span class="punctuation">:</span> <span class="string">&quot;^4.4.9&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>UI界面主要使用了Element-Plus，制图主要使用了Echarts，前端使用Vite+Vue3的框架进行开发。</p>
<h3 id="1-2-服务器端环境依赖"><a href="#1-2-服务器端环境依赖" class="headerlink" title="1.2 服务器端环境依赖"></a>1.2 服务器端环境依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot3<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>springboot3<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>springboot3<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>17<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.7.20<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.0.25<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.security<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-security-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-io<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">excludes</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">exclude</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;/<span class="name">exclude</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">excludes</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>数据库交互使用Mybatis框架，为锻炼数据库开发能力，<strong>所有数据库交互均通过手写SQL完成，而摒弃了目前流行的直接调打包好接口的形式</strong>。在Springboot3框架的基础上额外使用了一些实用插件，如Lombok，Hutool等。</p>
<h3 id="1-3-项目技术栈"><a href="#1-3-项目技术栈" class="headerlink" title="1.3 项目技术栈"></a>1.3 项目技术栈</h3><p>本项目基于Vite+Vue3，结合Element-Plus，Echarts作为前端技术栈，使用Springboot3集成Mybatis作为后端技术栈，数据库使用了适合大学生宝宝体制的MySql，并在购买的阿里云服务器内Docker环境下安装以便公共访问，同时我们在展示前将使用阿里云服务器结合Nginx进行代码的托管部署。版本管理工具为Gitee，接口测试软件为PostMan，数据库可视化软件为Navicat15，代码编写软件为Idea，数据库兼网站部署的服务器IP地址为：39.107.136.38，Gitee仓库地址为：<a target="_blank" rel="noopener" href="https://gitee.com/database-assignment_1/database-assignment。">https://gitee.com/database-assignment_1/database-assignment。</a></p>
<h2 id="二、项目文件结构"><a href="#二、项目文件结构" class="headerlink" title="二、项目文件结构"></a>二、项目文件结构</h2><p>后端文件结构：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">src.main:</span> <span class="string">后端资源父级目录</span></span><br><span class="line">	<span class="attr">java:</span> <span class="string">JAVA文件包</span></span><br><span class="line">		<span class="attr">com.example:</span></span><br><span class="line">			<span class="attr">config:</span> <span class="string">存放后端配置跨域请求等文件的文件夹</span></span><br><span class="line">			<span class="attr">controller:</span> <span class="string">表现层文件夹，前后端交互的第一层。控制器负责接收请求并将其转发给对应的视图或服务进行处理,</span> <span class="string">负责处理请求的路由和参数验证</span></span><br><span class="line">			<span class="attr">service:</span> <span class="string">服务层文件夹，前后端交互的第二层。该层负责处理用户请求的核心逻辑，并调用mapper层接口向数据库发起请求。</span></span><br><span class="line">			<span class="attr">mapper:</span> <span class="string">映射层文件夹，前后端交互的第三层，也是直接和数据库打交道的层。该层用于向数据库发送各类请求，并得到返回数据，常配合xml文件共同使用</span></span><br><span class="line">			<span class="string">entity：实体类文件夹，是数据库中的表属性的超集，还可能包含用于返回前端的额外信息</span></span><br><span class="line">				<span class="attr">front:</span> <span class="string">返回前端的打包类文件夹，用于简化后端操作</span></span><br><span class="line">  <span class="attr">resources:</span> <span class="string">其他资源文件包</span></span><br><span class="line">   	<span class="string">application.yaml：</span> <span class="string">后端配置文件，配置数据库，上传文件大小格式等重要信息</span></span><br><span class="line">		<span class="attr">mapper:</span> <span class="string">xml映射层文件夹，内含xml文件，处理较为复杂的SQL语句，与JAVA的mapper文件协同使用。</span></span><br></pre></td></tr></table></figure>
<p>前端文件结构：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">vue3:</span> <span class="string">前端资源父级目录</span></span><br><span class="line">	<span class="string">public:存放一些静态文件，供前端网站使用</span></span><br><span class="line">	<span class="string">src:前端主要文件目录</span></span><br><span class="line">		<span class="string">assets:存放静态文件</span></span><br><span class="line">		<span class="string">components:存放前端使用的组件</span></span><br><span class="line">		<span class="string">icon:存放图标</span></span><br><span class="line">		<span class="string">image:存放图片</span></span><br><span class="line">		<span class="string">router:配置前端路由</span></span><br><span class="line">		<span class="string">stores:存储多文件使用的功能函数</span></span><br><span class="line">		<span class="string">style:存放css文件</span></span><br><span class="line">		<span class="string">utils:配置request请求</span></span><br><span class="line">		<span class="string">views:存放前端所有的模板文件</span></span><br></pre></td></tr></table></figure>
<h2 id="三、功能架构"><a href="#三、功能架构" class="headerlink" title="三、功能架构"></a>三、功能架构</h2><p>功能架构示意图如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-20-38-a1c83a267d10d437f632a4be8d0b0035-1f9db8283a46676c440420cf0393a5f-13f7a0.png" alt></p>
<h3 id="3-1-灵魂匹配"><a href="#3-1-灵魂匹配" class="headerlink" title="3.1 灵魂匹配"></a>3.1 灵魂匹配</h3><p><strong>筛选条件:</strong></p>
<ul>
<li><p>自定义，自由多选</p>
</li>
<li><p>以我的标签为条件</p>
</li>
<li><p>清空条件</p>
</li>
</ul>
<p><strong>匹配结果:</strong></p>
<ul>
<li><p>包含信息：背景图、头像、昵称、详细信息、标签</p>
</li>
<li><p>申请好友：对中意的匹配对象发送好友申请</p>
</li>
<li><p>对象切换：不满意当前对象，点击切换下一个</p>
</li>
</ul>
<h3 id="3-2-用户中心"><a href="#3-2-用户中心" class="headerlink" title="3.2 用户中心"></a>3.2 用户中心</h3><p><strong>用户信息</strong></p>
<ul>
<li><p>展示信息：包括用户的背景图、头像、昵称、详细信息、标签</p>
</li>
<li><p>修改信息、上传图片：用户可以对自己的信息进行修改，支持头像、背景图的上传</p>
</li>
<li><p>申请好友/已是好友：用户可以对其他用户进行好友申请</p>
</li>
</ul>
<p><strong>帖子集</strong></p>
<ul>
<li><p>展示顺序：按时间排序由新到旧</p>
</li>
<li><p>操作：点赞、查看详情</p>
</li>
</ul>
<p><strong>照片墙</strong></p>
<ul>
<li>走马灯形式，将用户的所有照片循环播放</li>
</ul>
<h3 id="3-3-发布帖子-照片"><a href="#3-3-发布帖子-照片" class="headerlink" title="3.3 发布帖子/照片"></a>3.3 发布帖子/照片</h3><p><strong>新的帖子</strong></p>
<ul>
<li><p>文字内容</p>
</li>
<li><p>图片内容：支持多张图片的上传</p>
</li>
<li><p>查看权限：用户选择是否发布到广场</p>
</li>
</ul>
<p><strong>照片墙更新</strong></p>
<ul>
<li><p>原有图片管理</p>
<ul>
<li>查看大图：查看图片详情</li>
<li>删除图片：从原有照片中删去</li>
</ul>
</li>
<li><p>新图片添加</p>
</li>
</ul>
<h3 id="3-4-帖子详情"><a href="#3-4-帖子详情" class="headerlink" title="3.4 帖子详情"></a>3.4 帖子详情</h3><p><strong>帖子内容</strong></p>
<ul>
<li><p>发帖人信息</p>
</li>
<li><p>帖子文字信息</p>
</li>
<li><p>帖子图片信息</p>
</li>
</ul>
<p><strong>对帖子/评论的操作</strong></p>
<ul>
<li><p>点赞，点赞数</p>
</li>
<li><p>评论，评论数</p>
</li>
</ul>
<p><strong>评论区</strong></p>
<ul>
<li><p>支持多级评论</p>
</li>
<li><p>支持评论之间互相回复</p>
</li>
<li><p>排序：按热度、时间</p>
</li>
</ul>
<h3 id="3-5-消息"><a href="#3-5-消息" class="headerlink" title="3.5 消息"></a>3.5 消息</h3><p><strong>顶部导航栏提醒：</strong></p>
<ul>
<li>实时新消息数：以小红点的形式，提醒用户有新消息</li>
</ul>
<p><strong>回复我的：</strong></p>
<ul>
<li><p>跳转原始内容：点击跳转到回复的对象，支持内容定位，即跳转到网页的对应位置</p>
</li>
<li><p>点赞、评论：在消息页即可对回复信息进行操作</p>
</li>
</ul>
<p><strong>收到的赞：</strong></p>
<ul>
<li><p>跳转原始内容：点击跳转到回复的对象，支持内容定位，即跳转到网页的对应位置</p>
</li>
<li><p>跳转个人主页：点击头像，跳转到点赞者的个人主页</p>
</li>
</ul>
<p><strong>系统通知</strong></p>
<p><strong>新的朋友</strong></p>
<ul>
<li><p>申请信息：来自其他用户的打招呼内容</p>
</li>
<li><p>是否通过：用户可选择是否通过其他用户成为好友</p>
</li>
</ul>
<p><strong>申请通过</strong></p>
<h3 id="3-6-登陆注册"><a href="#3-6-登陆注册" class="headerlink" title="3.6 登陆注册"></a>3.6 登陆注册</h3><ul>
<li><p>登录：用户根据用户名和密码来进行登录，同时在登录界面中有提供注册的选项。只有通过登录才可以进入网站的界面</p>
</li>
<li><p>注册：用户在注册页面填写相关的信息，如果填写的信息合法的话，显示注册成功，用户的信息在数据库保存。</p>
</li>
<li><p>兴趣标签选择：在用户注册成功之后，用户进行兴趣标签的选择。兴趣标签是灵魂匹配的部分依据。</p>
</li>
</ul>
<h3 id="3-7-广场"><a href="#3-7-广场" class="headerlink" title="3.7 广场"></a>3.7 广场</h3><ul>
<li>在广场界面中我们可以看到网站中所有公开的帖子。支持只看好友帖子和看所有帖子的分类。同时支持对帖子进行热度排序和时间排序的选项。</li>
<li>对每一个帖子，都可以进行点赞操作和评论操作。点击评论操作可以跳转到具体的帖子界面进行评论。</li>
</ul>
<h3 id="3-8-聊天"><a href="#3-8-聊天" class="headerlink" title="3.8 聊天"></a>3.8 聊天</h3><ul>
<li><p>在界面的左侧是好友列表。显示出当前用户的所有好友。同时在好友的姓名旁边显示当前用户和好友的未读信息。</p>
</li>
<li><p>右侧是和好友的聊天界面。显示当前用户和好友的所有聊天消息。用户可以和好友在这里发送消息。</p>
</li>
<li><p>支持好友亲密度显示，显示当前的亲密度数字和亲密度等级。</p>
</li>
</ul>
<h3 id="3-9-后台数据显示"><a href="#3-9-后台数据显示" class="headerlink" title="3.9 后台数据显示"></a>3.9 后台数据显示</h3><p>如果当前用户是管理员身份，则可以进入后台管理界面。</p>
<h4 id="3-9-1-主页信息统计"><a href="#3-9-1-主页信息统计" class="headerlink" title="3.9.1 主页信息统计"></a>3.9.1 主页信息统计</h4><ul>
<li>可以查看网站的访问流量统计</li>
<li>可以查看当前网站的每一个界面单独的访问流量</li>
</ul>
<h4 id="3-9-2-信息管理"><a href="#3-9-2-信息管理" class="headerlink" title="3.9.2 信息管理"></a>3.9.2 信息管理</h4><h5 id="3-9-2-1-基本信息管理"><a href="#3-9-2-1-基本信息管理" class="headerlink" title="3.9.2.1 基本信息管理"></a>3.9.2.1 基本信息管理</h5><ul>
<li><p>用户信息管理：在这里可以查看每个用户的信息，同时可以编辑用户的信息，以及进入其主页查看等</p>
</li>
<li><p>帖子信息管理：在这里可以查看到所有发布的帖子的信息，支持删除和编辑功能</p>
</li>
<li><p>图片信息管理：在这里可以查看到网站发布的所有图片的发送人，发送时间和图片的内容。支持删除功能。</p>
</li>
<li><p>标签信息管理：在这里可以查看到网站设置的个性标签的所有信息。支持修改标签信息和删除特定标签等。实现了标签的动态更新。</p>
</li>
<li><p>匹配交友信息管理：这里主要是针对灵魂匹配的信息统计。这里展示所有的灵魂匹配记录。同时对信息进行处理，统计出灵魂匹配的运行次数，平均成功率，使用次数最多的用户，一次匹配中发送好友申请最多的用户。</p>
</li>
<li><p>用户行为追踪：这里统计用户在网站的行为信息。统计出用户的行为比如点赞回复等操作，以及管理员发布公告等记录。</p>
</li>
</ul>
<h5 id="3-9-2-2-可视化数据展示"><a href="#3-9-2-2-可视化数据展示" class="headerlink" title="3.9.2.2 可视化数据展示"></a>3.9.2.2 可视化数据展示</h5><ul>
<li><p>用户信息可视化：这里以图表等形式展示出用户注册流量统计，用户男女比例，用户星座比例，用户家乡统计，活跃用户统计的功能。</p>
</li>
<li><p>帖子信息可视化：这里对帖子和评论的信息进行可视化。展示出帖子的热度排行，评论的热度排行。</p>
</li>
<li><p>社交信息可视化：这里统计的是与社交信息有关的消息。统计出用户的最大好友数以及所有用户的平均好友数，以直方图的形式展示。然后是亲密度统计。统计用户和好友的所有亲密度的最高值，以及所有亲密度，用直方图的形式展示。</p>
</li>
<li><p>社交网络图：通过统计每个用户的好友状态，展示出社交网络图，展现当前用户的社交关系。</p>
</li>
</ul>
<h4 id="3-9-3-公告管理"><a href="#3-9-3-公告管理" class="headerlink" title="3.9.3 公告管理"></a>3.9.3 公告管理</h4><p>​    管理员可以对所有的公告进行管理，包括编辑和删除的操作，同时管理员也可以在此界面发布公告。可以选择向特定的用户发布公告。</p>
<h4 id="3-9-4-图片生成（Bonus）"><a href="#3-9-4-图片生成（Bonus）" class="headerlink" title="3.9.4 图片生成（Bonus）"></a>3.9.4 图片生成（Bonus）</h4><p>​    通过对抗生成模型Pix2Pix，用户可以在网站中上传一个建筑物标签图片，模型会生成一张真实世界的图片，目前该功能仅供本地娱乐，后续可用此技术实现用户背景头像的生成与风格迁移。</p>
<h2 id="四、具体功能介绍"><a href="#四、具体功能介绍" class="headerlink" title="四、具体功能介绍"></a>四、具体功能介绍</h2><h3 id="4-1-个人主页"><a href="#4-1-个人主页" class="headerlink" title="4.1 个人主页"></a>4.1 个人主页</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-18-55-2073d306509c0fe949de4212a58f40ab-1.1-67be88.png" alt="image-20231221160221612"></p>
<p><strong>信息：</strong></p>
<ul>
<li><p>左边：用户信息。从上到下依次为</p>
<ul>
<li><p>用户空间背景图</p>
</li>
<li><p>用户头像、昵称</p>
<ul>
<li>按钮<ul>
<li>修改信息：若该主页是当前登录用户的个人页面，显示修改信息按钮</li>
<li>申请/已为好友：若该主页和当前用户不同，两个用户未成为好友时显示申请好友按钮，否则显示已为好友按钮</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>用户详细信息：如性别、个性签名、籍贯、学号、真实姓名、学院、年级等</p>
</li>
<li><p>用户标签：用户的个人标签，反应该用户的性格、爱好、经历等等。</p>
</li>
</ul>
<ul>
<li><p>右边：用户发布的所有帖子/照片</p>
<ul>
<li><p>帖子列表：按时间排序由新到旧，显示该用户发表过的所有帖子。每个帖子包括信息</p>
<ul>
<li>发帖信息：发帖人的头像、昵称，发帖时间</li>
<li>帖子的文字内容</li>
<li>帖子的图片内容：每三个图片一行</li>
<li>帖子点赞数、评论数</li>
</ul>
</li>
<li><p>照片墙：以走马灯形式展示，所有图片会自动循环展示。</p>
</li>
<li><p>帖子集和照片墙切换按钮</p>
</li>
</ul>
</li>
</ul>
<p><strong>功能：</strong></p>
<p><strong>修改个人信息：</strong></p>
<ul>
<li><p>默认输入为原有个人信息</p>
</li>
<li><p>学院支持联想输入，即输入学院名称的前几个字自动筛选出对应学院，方便快捷。</p>
</li>
<li><p>年级实现多选功能</p>
</li>
<li><p>头像和背景图可以点击替换，并在当前页面预览。</p>
</li>
<li><p>点击<code>下一页</code>/<code>上一页</code>换页，更改不同的信息。</p>
</li>
<li><p>个人标签可以多选，默认为原有标签</p>
</li>
<li><p>点击<code>提交修改</code>可以成功修改个人信息，点击<code>取消</code>或对话框外的任意位置可以关闭对话框。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-21-12-a19c712a0205f7a80a616eeab69fd2a4-1.2-cf69bf.png" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-21-29-ee2f82f6cbeaed661854eca398c13219-1.3-ab49d4.png" alt></p>
<p><strong>申请好友：</strong></p>
<p>对于非好友用户，点击<code>添加好友</code>，在弹出的输入框中输入内容，可以向该用户发送一条申请信息；好友用户则显示为<code>已是好友</code>，不能再发送申请信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-22-14-a465e08c73a3b88cacd2d482d3474e15-1.3.2-545053.png" alt="1.3.2" style="zoom:50%;"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-22-04-198078dbc091d3b1d889cd4d1b49dae7-1.3.1-6c7525.png" alt="1.3.1" style="zoom:50%;"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-18-57-bf37517c2392154f0e8c9d0bd11dc471-1.3.3-314010.png" alt="1.3.3" style="zoom:50%;"></p>
<p><strong>点赞帖子：</strong></p>
<p>​    点击<code>点赞</code>，会实时改变点赞状态和点赞数。若当前用户对该帖子点赞过，则显示为红色点赞图标，再次点击会取消点赞，点赞数减一；否则显示为白色点赞图标，点击后变红，点赞数加一。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-23-38-f0d66a3a9b529beb3fcdc434f9a0fb45-1.4-e47f4f.png" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-23-38-a0323cc5407176c96896700dc7fb72f5-1.5-80e488.png" alt></p>
<p><strong>查看帖子详情：</strong></p>
<p>​    点击<code>评论</code>按钮或者帖子图片（如果该帖子有图片内容的话），跳转到帖子详情页。</p>
<p><strong>帖子集和照片墙切换按钮：</strong></p>
<p>​    点击切换展示内容，默认为帖子集。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-18-58-77c1075b7f0a725c42d23e200fd993b4-1.6-df2ab4.png" alt="1.6"></p>
<p><strong>切换照片：</strong></p>
<p>​    可通过左右按钮或下方的进度条切换查看照片。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-23-58-07d85d4680210c4474e92ce7e4843804-1.7-fbab43.png" alt></p>
<h3 id="4-2-发布帖子-照片"><a href="#4-2-发布帖子-照片" class="headerlink" title="4.2 发布帖子/照片"></a>4.2 发布帖子/照片</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-24-39-04153f6086693fabefc68c3f9bc84ae7-2.1-4056e3.png" alt></p>
<p><strong>信息：</strong></p>
<ul>
<li>新的帖子：从上到下依次为<ul>
<li>发表按钮</li>
<li>文字内容编辑区</li>
<li>图片内容编辑区</li>
<li>查看权限设置区</li>
</ul>
</li>
<li>照片墙更新：从上到下依次为<ul>
<li>发表按钮</li>
<li>原有图片管理区</li>
<li>新图片添加区</li>
</ul>
</li>
</ul>
<p><strong>功能：</strong></p>
<p><strong>功能切换：</strong></p>
<p>点击<code>新的帖子</code>/<code>照片墙更新</code>实现功能切换</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-18-59-4b11a9dc87327a6751b305814f00836f-2.2-c878d3.png" alt="2.2"></p>
<p><strong>原有照片管理：</strong></p>
<p>鼠标悬停在原有照片上，会出现 <code>放大</code> 和 <code>删除</code> 两个图标，点击触发对应功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-18-59-18225db0193045851e4813a9b4397092-2.3-58a911.png" alt="2.3"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-25-01-1edd2547238bbd96f359bda84c7ea132-2.3.1-a67dc9.png" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-25-15-b1965012be5d8cbdcf677d98ab7a8c35-2.3.2-356d0b.png" alt></p>
<p><strong>添加新的图片：</strong></p>
<p>点击下方的 + 号，选择图片文件上传。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-01-1571ed56aa5164b26b045b294a621714-2.4-5250e9.png" alt="2.4"></p>
<p><strong>新的帖子：</strong></p>
<p>图片操作类似上述，图片右上角为绿色对钩说明上传成功；文字编辑区默认高度为3行，高度随输入变化，也可以手动调节高度（在红框处）；最下方可设置查看权限；右上角可发表帖子/发布修改后的照片墙。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-02-415cd0585898602bf8f616f181209d7c-2.5-e9ec91.png" alt="2.5"></p>
<h3 id="4-3-消息"><a href="#4-3-消息" class="headerlink" title="4.3 消息"></a>4.3 消息</h3><p><strong>导航栏最右：</strong></p>
<p>​    以红点形式显示实时消息数目，超过100条消息会显示为99+；若无新消息则不显示红点。</p>
<p><strong>消息页面：</strong></p>
<p><strong>A. 左侧为消息中心导航</strong></p>
<ul>
<li>分为5大部分，对应不同的消息类型；</li>
<li>若有新消息，会显示新消息对应条数，用户查看该模块时仍然保持，便于用户了解新消息条数，直到离开该模块才会消失。</li>
</ul>
<p><strong>B. 右侧为具体消息内容及操作：</strong></p>
<ul>
<li><p>回复我的：回复当前用户发布过的帖子/评论的消息。包括以下内容</p>
<ul>
<li>回复者的信息：头像、昵称</li>
<li>回复的对象：reply:xxx，即当前用户发布过的帖子/评论</li>
<li>回复的时间</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-25-39-14dfd3cb6cc67e576988f36cee5d045f-3.1-8dd6e8.png" alt></p>
</li>
<li><p>收到的赞：点赞当前用户发布过的帖子/评论的消息。包括以下内容</p>
<ul>
<li>点赞者的信息：头像、昵称</li>
<li>点赞的对象：like:xxx，即当前用户发布过的帖子/评论</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-04-d3cf28186c6be5b660682650a260718d-3.2-09ddcc.png" alt="3.2"></p>
</li>
<li><p>系统通知：由系统发布的消息。包括消息时间和消息内容</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-26-09-6ca0be4a3fcba5f890a049d2852b3bb5-3.3-ea25c9.png" alt></p>
</li>
<li><p>新的朋友：其他用户发来的交友申请</p>
<ul>
<li>申请者信息：头像、昵称</li>
<li>打招呼内容</li>
<li>时间</li>
<li>是否已添加该用户为好友</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-05-139b9121fdb62366ffffa88b1a7074da-3.4-88be2f.png" alt="3.4"></p>
</li>
<li><p>申请通过：当前用户向其他用户发过的好友申请，若被其他用户通过，当前用户会收到申请通过提醒。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-26-40-1978c50ecc811151028a695db078fb76-3.5-1aa791.png" alt></p>
</li>
</ul>
<p><strong>功能：</strong></p>
<p><strong>通用功能：</strong></p>
<ul>
<li>点击用户头像跳转到该用户的个人主页</li>
<li>对单条消息的删除</li>
<li>对某一类型的所有消息清空</li>
</ul>
<p><strong>回复我的：</strong></p>
<ul>
<li><p>点击回复内容 <code>reply:xxx</code>，可以跳转到对应位置。</p>
<ul>
<li><p>若源内容为一个帖子，跳转到帖子的详情页。</p>
</li>
<li><p>若源内容为一个评论，跳转到回复所在的帖子详情页后，滑动到回复所在的位置。</p>
</li>
</ul>
</li>
</ul>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-27-01-40cc873433abb846ff4125c960271a9c-3.6-c70777.png" alt></p>
<ul>
<li><p>对每条回复，可以进行点赞和评论，点赞效果实时显示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-08-f88e7f394c968d48f64b40bdc346a165-3.7-103e92.png" alt="3.7"></p>
</li>
</ul>
<p><strong>收到的赞：</strong></p>
<ul>
<li>点击源内容 <code>like:xxx</code>，可以跳转到对应位置。</li>
</ul>
<p><strong>新的朋友：</strong></p>
<ul>
<li><p>若还未成为好友，点击 <code>通过</code> 按钮即可添加为好友</p>
</li>
<li><p>若已成为好友，显示为 <code>已通过</code> 按钮，不再进行操作。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-27-23-48d683ee34e0ad926174256f46368562-3.8-e54a2c.png" alt></p>
</li>
</ul>
<h3 id="4-4-帖子详情"><a href="#4-4-帖子详情" class="headerlink" title="4.4 帖子详情"></a>4.4 帖子详情</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-27-58-1270e3d1862a06132c1a9e9c6986e931-4.1-fb8a1f.png" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-09-2432db58054f08426bdcdd58edbe5397-4.2-918368.png" alt="4.2"></p>
<p><strong>信息：</strong></p>
<ul>
<li>发帖者信息：头像、昵称</li>
<li>帖子信息：发帖时间、帖子的浏览量、点赞数、评论数</li>
<li>主评论框：显示当前用户的头像、输入评论的内容</li>
<li>评论区：包括一级评论和多级评论<ul>
<li>一级评论：直接对帖子进行评论</li>
<li>多级评论：<ul>
<li>显示：回复一级评论或回复一级评论下的其他评论，都显示在该一级评论下</li>
<li>被回复人：若直接回复一级评论，不显示被回复人；否则，在评论内容的最前面显示 @xxx，其中xxx为被回复人的昵称</li>
</ul>
</li>
<li>评论的互动信息：点赞数、评论数 (只在一级评论显示)</li>
</ul>
</li>
</ul>
<p><strong>功能：</strong></p>
<p><strong>点赞 帖子/评论</strong></p>
<p>点击对应位置的<code>点赞图标</code>，会实时改变点赞状态和点赞数。若当前用户对该 帖子/评论 点赞过，则显示为红色点赞图标，再次点击会取消点赞，点赞数减一；否则显示为白色点赞图标，点击后变红，点赞数加一。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-28-21-48fab4daa4a9c2fcaeea080a39aeef46-4.3-91531d.png" alt></p>
<p><strong>评论 帖子/评论：</strong></p>
<ul>
<li><p>帖子：</p>
<ul>
<li>点击主评论框，评论框会从灰色变成蓝色，聚焦于此，显示<code>发表评论</code>按钮，即可输入评论内容；</li>
<li>点击<code>发表评论</code>即可发布；</li>
<li>点击主评论框外任意位置，评论框会从蓝色变成灰色，取消聚焦，隐藏<code>发表评论</code>按钮</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-28-37-be7e2d57d2cbf33095b69366bb1402a9-4.4.1-972544.png" alt></li>
</ul>
</li>
<li><p>评论：点击任意评论的 评论图标，即可进行评论；再次点击 评论图标，或点击其他评论的 评论图标，即可关闭当前评论框。</p>
<ul>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-11-e66022f6bc6e7a375527356861e63795-4.4.2-a3d5b9.png" alt="4.4.2"></li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-29-30-a7ba80780fa45ee07e1b9b532203c615-4.4.3-bc4020.png" alt></li>
</ul>
</li>
</ul>
<p><strong>评论排序：</strong></p>
<p>评论区的一级评论默认按照热度排序，点击右上角按钮，可以切换 按热度排序 或者 按时间排序。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-29-51-ca1f74c3d80a742a70fd198d14ca8231-4.5.1-072d40.png" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-12-ef7fad76b9f7479a523b3adb52bbd19c-4.5.2-db356c.png" alt="4.5.2"></p>
<h3 id="4-5-灵魂匹配"><a href="#4-5-灵魂匹配" class="headerlink" title="4.5 灵魂匹配"></a>4.5 灵魂匹配</h3><p><strong>信息：</strong></p>
<ul>
<li><p>选择标签页：用户可以选择自己感兴趣的标签，灵魂匹配会根据选择的标签来返回匹配列表。</p>
<ul>
<li>多个标签种类，每个种类下有多个标签，用户可自由选择</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-30-09-b02f71085b7b8bdc1a05ed3897ac6258-5.1-510395.png" alt></li>
</ul>
</li>
<li><p>匹配结果页：本次灵魂匹配的结果。</p>
<ul>
<li>左侧：对方用户的信息栏</li>
<li>右侧：对方用户的照片墙</li>
<li><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-30-22-b41a7471e2519778018b6df8db1b04f7-5.2-1bf16c.png" alt></li>
</ul>
</li>
</ul>
<p><strong>功能：</strong></p>
<p><strong>选择标签页：</strong></p>
<ul>
<li>多选：通过滑动纵向滚动条和横向滚动条，用户可自由多选标签。</li>
<li>我的：点击右上方 <code>我的标签</code> 按钮，可以选中所有当前用户的个性标签，以实现同类匹配。</li>
<li>清空：点击右上方 <code>清空选择</code> 按钮，可以清空当前已选标签，以重新进行选择。</li>
<li>匹配人数：点击右下角的 <code>- / +</code> 按钮，或直接在输入框中输入数字，可以选择匹配人数。若数字不合法，则不会进入匹配。</li>
<li>开始匹配：点击开始灵魂匹配，进入匹配结果页。</li>
</ul>
<p><strong>匹配结果页：</strong></p>
<ul>
<li>添加好友：匹配结果保证匹配到的对象都不是当前用户的好友。点击 <code>添加好友</code> 按钮，编辑申请信息后，即可发送好友申请。</li>
<li><p>切换照片：以走马灯形式展示，匹配对象的图片会自动循环展示。可通过图片左右小按钮或下方的进度条切换查看照片。</p>
</li>
<li><p>切换对象：点击页面左右大按钮，可切换当前匹配对象；一次匹配结果的匹配对象循环显示。</p>
</li>
</ul>
<h3 id="4-6-用户管理"><a href="#4-6-用户管理" class="headerlink" title="4.6 用户管理"></a>4.6 用户管理</h3><h4 id="4-6-1-登陆界面"><a href="#4-6-1-登陆界面" class="headerlink" title="4.6.1 登陆界面"></a>4.6.1 登陆界面</h4><p>登录的界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-14-8ae99dbd661302ceb353da66bfa7f648-154-17033345251092-140e79.jpg" alt="154"></p>
<p>前端调用login函数完成登录的整体逻辑操作。将当前用户填写的信息返回到后端，如果后端返回登陆成功后则将界面设置到主页。登录界面中可以点击“注册”进入到注册页面.</p>
<h4 id="4-6-2-注册界面"><a href="#4-6-2-注册界面" class="headerlink" title="4.6.2 注册界面"></a>4.6.2 注册界面</h4><p>注册界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-30-48-7d841c3c30322952274651821aa015f5-155-01718a.jpg" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-14-19cacef6583aeae1032aeaf6d9ba4f6c-158-d8a0bf.jpg" alt="158"></p>
<p> 前两页是用户的注册页面。用户输入表单的信息后，  前端将信息发送到后端，通过后端的返回值和前端的检查判断是否注册成功，如果注册成功就跳转到标签选择界面，如果注册失败就展示对应的弹窗然后跳转到第一页。</p>
<h4 id="4-6-3-兴趣标签选择"><a href="#4-6-3-兴趣标签选择" class="headerlink" title="4.6.3 兴趣标签选择"></a>4.6.3 兴趣标签选择</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-31-03-a05222f60341ddff6e5eab81870c905b-159-36fd2a.jpg" alt></p>
<p>进入到标签选择页面后，用户根据自身的兴趣和特性选取自己的标签。</p>
<h3 id="4-7-广场"><a href="#4-7-广场" class="headerlink" title="4.7 广场"></a>4.7 广场</h3><p>广场的主要功能是展示网站中所有公开的帖子，便于用户进行查看和交互。</p>
<p>广场的界面如下：</p>
<p>​    <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-16-9269b8167d140d2214b8712328068844-160-96ceab.jpg" alt="160"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-16-0a85485d039418d64a5148fcf1478be8-161-b20e25.jpg" alt="161"></p>
<p>广场界面获取当前所有公开的帖子并且展示。同时支持选择功能和筛选功能。选择功能是只看好友和看所有帖子。筛选功能是将帖子按照时间来排序，将贴子按照热度来排序。这里热度的计算逻辑是：<em>HOT  = 点赞量 x 5 + 评论数 x 10</em>。下图为排序的位置。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-31-34-9d818f795771349277d319f809e592da-image-20231223203420240-ebbe98.png" alt></p>
<h3 id="4-8-聊天"><a href="#4-8-聊天" class="headerlink" title="4.8 聊天"></a>4.8 聊天</h3><p>聊天界面主要用于用户好友列表的展示以及支持用户和好友的聊天功能。界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-31-48-1af65bcc5acabbe232d400fcc8d52863-163-1ad5b9.jpg" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-32-11-bf58434ccfe54a87d731d2ee652cedeb-164-1ce06d.jpg" alt></p>
<p>左侧是当前用户的好友列表，右侧是用户与选定好友的聊天界面。右面的聊天功能：聊天功能的逻辑是用户点击发送后，后端接收到message并且存储到数据库中，然后前端按照相对较短的频率反复获取数据库中的message，实时的展示两个人之间的聊天功能。下图展示聊天的过程。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-32-38-8b588435ee3d8dcc9feb9b0a7ff1436e-198-a62576.jpg" alt></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-32-38-75b51d5194d459f5580406b98ebc66cf-199-4e0a35.jpg" alt></p>
<p>可以发现消息成功发送。</p>
<p><strong>未读消息</strong>：我们为好友聊天加入了未读信息的逻辑。当当前用户没有看过好友发的消息时，界面将显示。当用户点击相应的好友时，未读消息的界面将消失。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-18-fe6c3a1463e1ff2ae42b2fb54c164874-167-170333532348114-48d97f.jpg" alt="167"></p>
<p><strong>亲密度展示</strong>：我们针对好友之间的交流情况，给定了好友之间亲密度的概念。好友之间亲密度的公式如下： <em>私聊每条+2，点赞对方的帖子 +5，点赞对方的评论 +3，评论对方的帖子 +10，评论对方的评论 +7</em>。由此我们在chat界面展示与好友的亲密度。用不同的颜色代表不同的亲密度等级。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-33-03-2198d5a996b09b320f09f350ce56f192-168-cedc78.jpg" alt></p>
<p>具体亲密度等级和颜色的对应关系为</p>
<div class="table-container">
<table>
<thead>
<tr>
<th>亲密度（curIntimacy）</th>
<th>image</th>
</tr>
</thead>
<tbody>
<tr>
<td>curIntimacy &lt; 100</td>
<td>💛</td>
</tr>
<tr>
<td>100 &lt;= curIntimacy  &lt; 200</td>
<td>💙</td>
</tr>
<tr>
<td>200 &lt;= curIntimacy &lt; 300</td>
<td>💜</td>
</tr>
<tr>
<td>300 &lt;= curIntimacy &lt; 400</td>
<td>🧡</td>
</tr>
<tr>
<td>400 &lt;= curIntimacy &lt; 500</td>
<td>❤</td>
</tr>
<tr>
<td>500 &lt;= curIntimacy &lt; 600</td>
<td>💗</td>
</tr>
<tr>
<td>600 &lt;= curIntimacy &lt; 700</td>
<td>💘</td>
</tr>
<tr>
<td>curIntimacy &gt;= 700</td>
<td>💕</td>
</tr>
</tbody>
</table>
</div>
<p>curIntimacy作为friend的属性被同步更新，在每次点击好友时更新。</p>
<h3 id="4-9-后端数据显示"><a href="#4-9-后端数据显示" class="headerlink" title="4.9 后端数据显示"></a>4.9 后端数据显示</h3><p>数据展示区域是作为管理员权限，用于数据展示，数据管理，发布公告等功能的后台平台。</p>
<h4 id="4-9-1-网站数据展示"><a href="#4-9-1-网站数据展示" class="headerlink" title="4.9.1 网站数据展示"></a>4.9.1 网站数据展示</h4><p>主要是展示网站流量等相关内容。具体界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-18-f29ce4887d1ddcf5a71b8564bfff67b7-170-af3629.jpg" alt="170"></p>
<p>界面记录了网站访问流量统计和每个网页的访问流量信息统计。</p>
<h4 id="4-9-2-信息管理"><a href="#4-9-2-信息管理" class="headerlink" title="4.9.2 信息管理"></a>4.9.2 信息管理</h4><h5 id="用户信息管理"><a href="#用户信息管理" class="headerlink" title="用户信息管理"></a>用户信息管理</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-33-50-09e1a1b701674cbb00572c741c64a646-173-ba6873.jpg" alt></p>
<p>该界面展示网站所有用户的信息。同时支持用户的新增，删除，编辑等操作。其中编辑操作的界面如图：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-33-50-c5f70ff5c3712630ce4fe8901f2f723d-174-a6bc9e.jpg" alt></p>
<p>同时支持用户信息的导入导出功能。可支持导入导出Excel文件的操作。导出的Excel的部分截图如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-34-17-7e28db78f935c249e25cc5928ab6e0e0-175-a90292.jpg" alt></p>
<h5 id="帖子信息管理"><a href="#帖子信息管理" class="headerlink" title="帖子信息管理"></a>帖子信息管理</h5><p>主要进行帖子的管理等操作。页面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-20-1ccb8a15c860ac943e4807b6fc407114-176-375f2a.jpg" alt="176"></p>
<p>帖子支持批量删除和导出功能。导出的excel文件如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-35-20-a67889c0635b61cdfd51b7b6f46b2875-177-ea3848.jpg" alt></p>
<p>同时帖子支持搜索功能。可以根据帖子的内容或者帖子的作者来筛选出相对应的帖子。下面是示例：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-36-10-d7266f6b2c5dddfa2a2d6aa5f9a9292b-178-51daa8.jpg" alt></p>
<p>支持单个参数和多个参数进行搜索。查看详情按钮会跳转进对应的帖子动态路由。</p>
<h5 id="图片信息管理"><a href="#图片信息管理" class="headerlink" title="图片信息管理"></a>图片信息管理</h5><p>图片管理主要是展示网站中用户发的所有图片，可以对图片进行操作。界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-21-004833a5a5f4aa7bb26f3d7b1ce49480-180-d3e02a.jpg" alt="180"></p>
<p>同样的，界面支持图片的删除以及搜索功能。搜索示例如下：</p>
<p>!<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-36-57-023739cd45ddfeca3884c222137556f3-181-133e28.jpg" alt></p>
<h5 id="标签信息管理"><a href="#标签信息管理" class="headerlink" title="标签信息管理"></a>标签信息管理</h5><p>标签信息管理的功能是提供对当前兴趣标签的增删查改。界面如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-22-1fd1d8ae0fc76d52fdcbd9d8194d128a-184-0eb14d.jpg" alt="184"></p>
<p>​    同样提供标签的搜索功能，新增标签，删除标签，修改标签，导入导出等功能。</p>
<h5 id="匹配交友信息管理"><a href="#匹配交友信息管理" class="headerlink" title="匹配交友信息管理"></a>匹配交友信息管理</h5><p>这里主要是展示灵魂匹配界面所实现的功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-37-23-9696862e0241cd5f1f39e85221d74452-186-ca48fa.jpg" alt></p>
<p>可以看到，这里记录了网站所有使用灵魂匹配的记录，以及关于灵魂匹配的一些统计数据。</p>
<h5 id="用户行为追踪"><a href="#用户行为追踪" class="headerlink" title="用户行为追踪"></a>用户行为追踪</h5><p>这里主要是记录用户的行为记录，比如点赞，评论等行为，以及管理员的行为等。同样支持搜索功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-37-40-3ae74fc5f8fa3deac51fd9c7595bfe15-187-160647.jpg" alt></p>
<p><strong>行为类型分为：like,reply,system,success,friend</strong></p>
<h4 id="4-9-3-可视化数据展示"><a href="#4-9-3-可视化数据展示" class="headerlink" title="4.9.3 可视化数据展示"></a>4.9.3 可视化数据展示</h4><p>这里主要分为用户信息可视化，帖子信息可视化，社交信息可视化。</p>
<p><strong>用户信息可视化</strong></p>
<p>我们分别对用户的注册流量，用户的男女比例，用户的星座比例，用户的家乡地，以及活跃用户流量做出可视化统计，通过可视化用户数据我们可以更好地挖掘数据特征，同时分析网站的实时运营情况。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-38-07-be9f2c7157ab0aaec08f84071e75680c-188-f7db3b.jpg" alt></p>
<p><strong>帖子信息可视化</strong></p>
<p>我们分别就帖子热度最高前20名与评论热度最高的前20名进行统计排序，并展示出实时热度与对应路由，便于管理员快速查看，可以将其理解为一种“<strong>热搜榜单</strong>”。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-24-bf8e72026c9432ebdbad41a78e51bf86-189-5d4922.jpg" alt="189"></p>
<p><strong>社交信息可视化</strong></p>
<p>我们就每个人的好友数与好友间的亲密度绘制直方图，直观的查看用户的交友行为，同时我们支持自由调节最小值与直方图间距，进行不同粒度的统计。在图表最上方会展示出一些统计量，比如亲密度最高的两人，我们会实时追踪这些<strong>最值</strong>，如若最后二人因本网站结缘并牵手成功，这将是我们的荣幸。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-38-27-8406378a3ec6649cce3339bb57ddfb3e-202-e117b6.jpg" alt></p>
<p>同样我们就用户间联系绘制社交网络图，支持鼠标缩放与自由拖动，节点处展示用户姓名，可以更好的查看    好友间联系甚至是一些具有完全图属性的<strong>“小团体”</strong>，又或是一个好友都没有的<strong>”孤家寡人“</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-38-47-4c73f3d8798191c7d9c53ba80b9c3a68-204-c522ac.jpg" alt></p>
<h4 id="4-9-4-发布管理员公告"><a href="#4-9-4-发布管理员公告" class="headerlink" title="4.9.4 发布管理员公告"></a>4.9.4 发布管理员公告</h4><p>管理员可以在这里选择成员发布管理员公告，同样可以看到当前发布的所有公告，支持删除以及导出等功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-39-07-74870440672609b484391087a389bc25-192-832e69.jpg" alt></p>
<p>同时管理员可以在这里发布公告，支持选择指定人发送或全选所有人发送，在考虑用户人数增多时产生的难以寻找指定目标问题，我们对此也增加了用户名检索功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F20%E7%BB%84%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2F2024%2F10%2F12%2F18-19-25-14a6b7c94d865ce6716a03f52db0bf5b-img-6db3d7.png" alt="img.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-25-20fb8820a9ceb80c8bd5855b7505c6af-195-eeb0b1.jpg" alt="195"></p>
<p>发布后可以实时看到公告，支持按照通知时间和接收人数排序。</p>
<h4 id="4-9-5-背景生成"><a href="#4-9-5-背景生成" class="headerlink" title="4.9.5 背景生成"></a>4.9.5 背景生成</h4><p>我们使用pix2pix对抗网络生成模型，在云服务器上进行部署。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-19-27-aa1abcf28349654acfa9f75bc3ef9201-e0737f24fa387b22d02e4b5872b8092-dfe6e3.png" alt="e0737f24fa387b22d02e4b5872b8092"></p>
<p>不仅增加了趣味性，也为未来的用户生成自己的背景等场景提供了一种可行的方式。</p>
<h2 id="五、部分源代码说明"><a href="#五、部分源代码说明" class="headerlink" title="五、部分源代码说明"></a>五、部分源代码说明</h2><h3 id="5-1-聊天功能代码实现"><a href="#5-1-聊天功能代码实现" class="headerlink" title="5.1 聊天功能代码实现"></a>5.1 聊天功能代码实现</h3><p> 那么首先是获取好友列表的代码逻辑。</p>
<p> 前端代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getFriends</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">get</span>(<span class="string">&quot;/chat/friend&quot;</span>, &#123;<span class="attr">params</span>: &#123;<span class="attr">uid</span>: <span class="title class_">Id</span>&#125;&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        friendList.<span class="title function_">splice</span>(<span class="number">0</span>); <span class="comment">// 清空 friendList，确保它是响应式的</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> friend <span class="keyword">of</span> res.<span class="property">data</span>) &#123;</span><br><span class="line">          friendList.<span class="title function_">push</span>(friend); <span class="comment">// 逐个添加好友到 friendList</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(&#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;好友列表导入失败&quot;</span>,</span><br><span class="line">          <span class="attr">showClose</span>: <span class="literal">false</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">reject</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>后端代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;Map&lt;String, Object&gt;&gt; <span class="title function_">getFriendsInfo</span><span class="params">(Integer uid)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> chatMapper.getFriendsInfo(uid);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//sql代码</span></span><br><span class="line"><span class="meta">@Select(&quot;select u.id, u.nickname, u.avatarUrl, f.intimacy from user u inner join friend f on f.userId1 = u.id and f.userId2 = #&#123;uid&#125; or f.userId2 = u.id and f.userId1 = #&#123;uid&#125;&quot;)</span></span><br></pre></td></tr></table></figure>
<p>然后是右面的聊天功能：聊天功能的逻辑是用户点击发送后，后端接收到message并且存储到数据库中，然后前端按照相对较短的频率反复获取数据库中的message，实时的展示两个人之间的聊天功能。</p>
<p>具体实现代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">Initial</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">getFriends</span>(); <span class="comment">// 使用 await 等待异步操作完成</span></span><br><span class="line">  curFriendId = friendList[<span class="number">0</span>].<span class="property">id</span>;</span><br><span class="line">  <span class="comment">//curNickName = friendList[0].nickname;</span></span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">getRecords</span>();</span><br><span class="line">  <span class="keyword">await</span> request.<span class="title function_">post</span>(<span class="string">&quot;/chat/readAll?senderId=&quot;</span> + <span class="title class_">Id</span> + <span class="string">&quot;&amp;receiverId=&quot;</span> + curFriendId)</span><br><span class="line">      .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">          <span class="comment">// 处理响应</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">getUnReadMessage</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">onMounted</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title class_">Initial</span>(); <span class="comment">// 使用 await 等待 Initial() 函数执行完毕</span></span><br><span class="line">  <span class="built_in">setInterval</span>(getRecords, <span class="number">500</span>);</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">nextTick</span>()</span><br><span class="line">  <span class="title function_">scrollToBottom</span>()</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//获取聊天记录的逻辑</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getRecords</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> prevFriendList = recordList.<span class="property">value</span></span><br><span class="line">  fresh.<span class="property">value</span>++;</span><br><span class="line">  fresh.<span class="property">value</span> = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">if</span> (isClick) &#123;</span><br><span class="line">    <span class="keyword">await</span> request.<span class="title function_">get</span>(<span class="string">&quot;/chat/getChatRecord&quot;</span>, &#123;<span class="attr">params</span>: &#123;<span class="attr">uid</span>: <span class="title class_">Id</span>, <span class="attr">friendId</span>: curFriendId&#125;&#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        records = res.<span class="property">data</span>;</span><br><span class="line">        recordList.<span class="property">value</span> = res.<span class="property">data</span>[<span class="string">&quot;chats&quot;</span>];</span><br><span class="line">        <span class="comment">// console.log(recordList)</span></span><br><span class="line">        <span class="keyword">if</span> (recordList.<span class="property">value</span>.<span class="property">length</span> !== prevFriendList.<span class="property">length</span>) &#123;</span><br><span class="line">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="title function_">scrollToBottom</span>();</span><br><span class="line">          &#125;, <span class="number">500</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(&#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;好友列表导入失败&quot;</span>,</span><br><span class="line">          <span class="attr">showClose</span>: <span class="literal">false</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">if</span> (flag.<span class="property">value</span> === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="comment">// await nextTick()</span></span><br><span class="line">      <span class="comment">// document.body.offsetHeight;</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">scrollToBottom</span>();</span><br><span class="line">      &#125;, <span class="number">500</span>);</span><br><span class="line">      flag.<span class="property">value</span> = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-2-广场的选择和筛选帖子功能"><a href="#5-2-广场的选择和筛选帖子功能" class="headerlink" title="5.2  广场的选择和筛选帖子功能"></a>5.2  广场的选择和筛选帖子功能</h3><p>筛选功能是将帖子按照时间来排序，将贴子按照热度来排序。这是两种排序方式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">sortByTime</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(onBoardList.<span class="property">value</span>);</span><br><span class="line">  onBoardList.<span class="property">value</span>.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> timeA = <span class="keyword">new</span> <span class="title class_">Date</span>(a.<span class="property">time</span>);</span><br><span class="line">    <span class="keyword">const</span> timeB = <span class="keyword">new</span> <span class="title class_">Date</span>(b.<span class="property">time</span>);</span><br><span class="line">    <span class="keyword">return</span> timeB - timeA;</span><br><span class="line">  &#125;);</span><br><span class="line">  fresh1.<span class="property">value</span>--;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sortByHot</span>(<span class="params"></span>) &#123;</span><br><span class="line">  onBoardList.<span class="property">value</span>.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> value1 = a.<span class="property">clickNum</span> * <span class="number">5</span> + a.<span class="property">commentNum</span> * <span class="number">10</span>;<span class="comment">//算出入读</span></span><br><span class="line">    <span class="keyword">let</span> value2 = b.<span class="property">clickNum</span> * <span class="number">5</span> + b.<span class="property">commentNum</span> * <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">return</span> value2 - value1;</span><br><span class="line">  &#125;);</span><br><span class="line">  fresh1.<span class="property">value</span>--;<span class="comment">//fresh1用于模板实时响应</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后是选择功能。选择功能是只看好友和看所有帖子。代码逻辑如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">changeOnlyFriend</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">getFriends</span>();</span><br><span class="line">  onBoardList.<span class="property">value</span> = [];</span><br><span class="line">  <span class="comment">//console.log(allPosts.value);</span></span><br><span class="line">  <span class="comment">//console.log(friendList);</span></span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> post <span class="keyword">of</span> allPosts.<span class="property">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_">isFriend</span>(post.<span class="property">userId</span>)) &#123;</span><br><span class="line">      onBoardList.<span class="property">value</span>.<span class="title function_">push</span>(post);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fresh1.<span class="property">value</span>++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getFriends</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    request.<span class="title function_">get</span>(<span class="string">&quot;/chat/friend&quot;</span>, &#123; <span class="attr">params</span>: &#123; <span class="attr">uid</span>: userId &#125; &#125;).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (res.<span class="property">status</span> === <span class="number">200</span>) &#123;</span><br><span class="line">        friendList.<span class="title function_">splice</span>(<span class="number">0</span>); <span class="comment">// 清空 friendList，确保它是响应式的</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> friend <span class="keyword">of</span> res.<span class="property">data</span>) &#123;</span><br><span class="line">          friendList.<span class="title function_">push</span>(friend); <span class="comment">// 逐个添加好友到 friendList</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_">resolve</span>();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title class_">ElMessage</span>.<span class="title function_">error</span>(&#123;</span><br><span class="line">          <span class="attr">message</span>: <span class="string">&quot;好友列表导入失败&quot;</span>,</span><br><span class="line">          <span class="attr">showClose</span>: <span class="literal">false</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">reject</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="六、系统重要功能实现"><a href="#六、系统重要功能实现" class="headerlink" title="六、系统重要功能实现"></a>六、系统重要功能实现</h2><h3 id="6-1-鉴权实现"><a href="#6-1-鉴权实现" class="headerlink" title="6.1 鉴权实现"></a>6.1 鉴权实现</h3><h4 id="6-1-1-本地保存登录信息"><a href="#6-1-1-本地保存登录信息" class="headerlink" title="6.1.1 本地保存登录信息"></a>6.1.1 本地保存登录信息</h4><p>为了鉴别用户身份，我们采用本地保存 userInfo 作为用户的唯一标识。用户登录后，服务器校验用户身份并返回用户信息；客户端中储存该信息，并在相应的请求中在请求头中附带 userInfo 中的部分信息，以示身份；最终，服务器根据用户身份进而返回数据。<br>除此之外，userInfo 还可以作为标识用户是否登录的载体，因为只有登录过的用户，才会记录不为空的 userInfo。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//XXX.vue</span></span><br><span class="line"><span class="comment">//localStorage保存当前登录信息</span></span><br><span class="line"><span class="keyword">const</span> userInfo = res.<span class="property">data</span>;</span><br><span class="line"><span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(userInfo));</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="comment">//全局保存的用户信息</span></span><br><span class="line"><span class="keyword">const</span> user = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;user&#x27;</span>)) || <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">if</span> (user) &#123;</span><br><span class="line">    app.<span class="property">config</span>.<span class="property">globalProperties</span>.<span class="property">$user</span> = user;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-1-2-路由守护"><a href="#6-1-2-路由守护" class="headerlink" title="6.1.2 路由守护"></a>6.1.2 路由守护</h4><p>为了防止用户未登录直接通过网址访问个人中心页等等，我们设置网页的全局路由守卫。此处的逻辑采用前置守卫，即在进入每个页面前检测用户是否登录，从而显示给用户正确的内容。</p>
<p>对于需要用户登录页面，只需在 route 路由文件中设置其 meta 路由元信息，将其中 requireLogin 属性置为 true。触发前置路由时，会首先检测当前页面 requireLogin  属性是否为true，如果为 true，则将未登录用户路由到登录界面，以提醒用户需要先登录才能访问当前页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="comment">// 添加导航守卫</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> isLogin = user!=<span class="literal">null</span><span class="comment">/* 根据您的实际情况获取用户登录状态 */</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;isLogin&quot;</span> + isLogin);</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">matched</span>.<span class="title function_">some</span>(<span class="function"><span class="params">record</span> =&gt;</span> record.<span class="property">meta</span>.<span class="property">requireLogin</span>)) &#123;</span><br><span class="line">        <span class="comment">// 如果路由需要身份验证，并且用户未登录，则重定向到登录页面</span></span><br><span class="line">        <span class="keyword">if</span> (isLogin) &#123;</span><br><span class="line">            <span class="title function_">next</span>();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">next</span>(<span class="string">&#x27;/login&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 如果路由不需要身份验证，则继续正常导航</span></span><br><span class="line">        <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//rounter.js</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="attr">path</span>: <span class="string">&#x27;/chat&#x27;</span>,</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&quot;chat&quot;</span>,</span><br><span class="line">	<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/match/ChooseTag.vue&#x27;</span>),</span><br><span class="line">	<span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">&quot;选择标签&quot;</span>, <span class="attr">requireLogin</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-2-推荐算法"><a href="#6-2-推荐算法" class="headerlink" title="6.2 推荐算法"></a>6.2 推荐算法</h3><p>我们提出了带权重的杰卡德相似度算法，可以更好的根据每个标签权重的不同进行灵魂匹配，我们认为存在着一些<strong>与众不同的独特标签，可以是小众爱好，又或者是宗教信仰</strong>，一旦二人匹配到此标签，则应该赋予更大的权重。我们默认起始标签权重皆为1，后续管理员可进行更改。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://cdn.jsdelivr.net/gh/YangYzzzz/image-store@main/fix-dir%2F%E7%B3%BB%E7%BB%9F%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3%2Fdbhw%E6%96%87%E6%A1%A3.assets%2F2024%2F10%2F12%2F18-39-50-3fc3eb105659a2551a705d3bcc31b2a6-200-401063.jpg" alt></p>
<p>具体的代码实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Pair&lt;List&lt;User&gt;, Integer&gt; <span class="title function_">match</span><span class="params">(Integer uid, List&lt;Integer&gt; labelIds, Integer num)</span> &#123;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userMapper.getUserById(uid).get(<span class="number">0</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">targetSex</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">switch</span> (user.getSex()) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;男&quot;</span>: &#123;</span><br><span class="line">                targetSex = <span class="string">&quot;女&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;女&quot;</span>: &#123;</span><br><span class="line">                targetSex = <span class="string">&quot;男&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">default</span>:&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;兄弟你什么性别&quot;</span>);</span><br><span class="line">                targetSex = <span class="string">&quot;男&quot;</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 得到候选者</span></span><br><span class="line">        List&lt;Integer&gt; friends = friendMapper.getUserAllFriendId(uid);</span><br><span class="line">        List&lt;User&gt; targetUsers = userMapper.getUsersBySex(friends, uid, targetSex);</span><br><span class="line">        List&lt;Label&gt; labels = labelMapper.getLabels(); <span class="comment">// 得到所有标签</span></span><br><span class="line">        HashMap&lt;Integer, Float&gt; label2weight = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Label label : labels) &#123;</span><br><span class="line">            label2weight.put(label.getId(), label.getWeight());</span><br><span class="line">        &#125;</span><br><span class="line">        Set&lt;Integer&gt; set1 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(labelIds);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 为候选者打分</span></span><br><span class="line">        <span class="keyword">for</span> (User targetUser : targetUsers) &#123;</span><br><span class="line">            List&lt;Integer&gt; targetLabelIds = labelMapper.getUserLabelList(targetUser.getId());</span><br><span class="line">            <span class="comment">// 度量两个集合的相似度</span></span><br><span class="line">            <span class="type">float</span> <span class="variable">divide</span> <span class="operator">=</span> <span class="number">0</span>, divided = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">// 受杰卡德相似系数的启发(交集 / 并集)，我们提出了自己的相似度计算方法，我们(管理员)为每个标签赋予权重(0~1)，在此基础上计算(并集 * 各项权重 / 交集 * 各项权重)</span></span><br><span class="line">            Set&lt;Integer&gt; set2 = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(targetLabelIds);</span><br><span class="line">            Set&lt;Integer&gt; combine = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(); <span class="comment">// 并集</span></span><br><span class="line">            combine.addAll(set2);</span><br><span class="line">            combine.addAll(set1);</span><br><span class="line">            Set&lt;Integer&gt; intersection = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;&gt;(); <span class="comment">// 交集</span></span><br><span class="line">            <span class="keyword">for</span> (Integer integer : set1) &#123;</span><br><span class="line">                <span class="keyword">if</span> (set2.contains(integer)) &#123;</span><br><span class="line">                    intersection.add(integer);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Integer i : intersection) &#123;</span><br><span class="line">                divided += label2weight.get(i);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (Integer i : combine) &#123;</span><br><span class="line">                divide += label2weight.get(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (divide != <span class="number">0</span>) &#123;</span><br><span class="line">                targetUser.setScore(divided / divide);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                targetUser.setScore(<span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 降序排序</span></span><br><span class="line">        Collections.sort(targetUsers);</span><br><span class="line"></span><br><span class="line">        num = targetUsers.size() &gt; num ? num : targetUsers.size();</span><br><span class="line">        targetUsers = targetUsers.subList(<span class="number">0</span>, num);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获得照片集</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; num; i++) &#123;</span><br><span class="line">            targetUsers.get(i).setImageBoardUrls(imageBoardMapper.getImageBoardUrlsByUid(targetUsers.get(i).getId()));</span><br><span class="line">        &#125;</span><br><span class="line">        matchMapper.addSoulMatch(uid, num);</span><br><span class="line">        <span class="type">Integer</span> <span class="variable">matchId</span> <span class="operator">=</span> matchMapper.getCurMatchId();</span><br><span class="line">        <span class="keyword">return</span> Pair.of(targetUsers, matchId);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-3-文件上传"><a href="#6-3-文件上传" class="headerlink" title="6.3 文件上传"></a>6.3 文件上传</h3><p>我们的文件上传方式如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line"><span class="keyword">public</span> RestBean <span class="title function_">upload</span><span class="params">(<span class="meta">@RequestParam</span> MultipartFile file)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">    <span class="comment">// 设置保存路径</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">fileUploadPath</span> <span class="operator">=</span> <span class="string">&quot;vue3\\public\\image\\&quot;</span>;</span><br><span class="line">    <span class="comment">// MultipartFile  多媒体文件</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">originalFileName</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">    <span class="type">String</span> <span class="variable">type</span> <span class="operator">=</span> FileUtil.extName(originalFileName);</span><br><span class="line">    <span class="comment">// 为文件重命名</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">uuid</span> <span class="operator">=</span> IdUtil.fastSimpleUUID();</span><br><span class="line">    <span class="type">String</span> <span class="variable">fileUUID</span> <span class="operator">=</span> uuid + <span class="string">&quot;.&quot;</span> + type;</span><br><span class="line">    <span class="type">File</span> <span class="variable">uploadFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(fileUploadPath + fileUUID);</span><br><span class="line">    <span class="comment">//先上传文件到磁盘</span></span><br><span class="line">    FileUtils.copyInputStreamToFile(file.getInputStream(), uploadFile);</span><br><span class="line">    <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">&quot;/public/image/&quot;</span> + fileUUID;</span><br><span class="line">    <span class="comment">// 返回给前端 on-success 方法中</span></span><br><span class="line">    <span class="keyword">return</span> RestBean.success(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码实现了文件上传的功能。它接收上传的文件，将文件保存到指定路径下，并返回文件的URL给前端。    目前由于需求原因，我们的网站只使用了图片上传，但是通过这个方法可以实现文件上传以及视频上传的功能。</p>
<h3 id="6-4-动态路由匹配"><a href="#6-4-动态路由匹配" class="headerlink" title="6.4 动态路由匹配"></a>6.4 动态路由匹配</h3><p>我们经常需要把某种模式匹配到的所有路由，全都映射到同个组件。例如，在个人主页页面，对于所有 ID 各不相同的用户，都要使用这个组件来渲染。那么，我们可以在 <code>vue-router</code> 的路由路径中使用“动态路径参数”(dynamic segment) 来达到这个效果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">path</span>: <span class="string">&#x27;/personal&amp;uid:userId&#x27;</span>,</span><br><span class="line">	<span class="attr">name</span>: <span class="string">&quot;PersonalPage&quot;</span>,</span><br><span class="line">	<span class="attr">component</span>: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&#x27;../views/user/PersonalPage.vue&#x27;</span>),</span><br><span class="line">	<span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">&quot;个人主页&quot;</span>, <span class="attr">requireLogin</span>: <span class="literal">true</span>&#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样，访问id为1和id为5的用户主页，只需访问 <code>/personal&amp;uid1</code> 和 <code>/personal&amp;uid5</code> 即可。</p>
<p>需要注意的是，同一路由的不同参数不会引起界面的刷新，导致虽然切换到了 <code>/personal&amp;uid5</code> ，界面仍然显示 id 为1的用户信息。我们采用监视参数变化的方式，及时刷新页面。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routeParams = <span class="title function_">ref</span>(router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">params</span>);</span><br><span class="line"><span class="title function_">watch</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    routeParams.<span class="property">value</span> = router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">params</span>;</span><br><span class="line">    <span class="comment">// 在这里可以处理参数变化时的逻辑</span></span><br><span class="line">    <span class="keyword">if</span>(routeParams.<span class="property">value</span>.<span class="property">userId</span> !== userId) &#123;</span><br><span class="line">        <span class="comment">// 例如，你可以在这里触发重新加载数据的操作</span></span><br><span class="line">        location.<span class="title function_">reload</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;, &#123; <span class="attr">deep</span>: <span class="literal">true</span> &#125;);</span><br></pre></td></tr></table></figure>
<p>对于具体的 <code>/personal&amp;uid1</code> 和 <code>/personal&amp;uid5</code> 都可以匹配到这个路由， 对应的值都会设置到 $route.params 中，可以直接取出来使用，从而加载对应的用户信息：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userId = router.<span class="property">currentRoute</span>.<span class="property">value</span>.<span class="property">params</span>.<span class="property">userId</span>;</span><br></pre></td></tr></table></figure>
<h3 id="6-5-触发器"><a href="#6-5-触发器" class="headerlink" title="6.5.触发器"></a>6.5.触发器</h3><p>为简化开发者逻辑，并充分利用数据库系统，我们使用了触发器和函数等功能，进一步优化数据库设计。</p>
<p>在给帖子点赞/撤销赞时更新帖子的点赞量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> addPostLikeNum</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> like2post</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@likenum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> likeNum <span class="keyword">from</span> post <span class="keyword">WHERE</span> id <span class="operator">=</span> new.postId); </span><br><span class="line"><span class="keyword">UPDATE</span> post <span class="keyword">SET</span> likeNum <span class="operator">=</span> <span class="variable">@likenum</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">WHERE</span> i</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> delPostLikeNum</span><br><span class="line">BEFORE <span class="keyword">DELETE</span> <span class="keyword">ON</span> like2post</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@likenum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> likeNum <span class="keyword">from</span> post <span class="keyword">WHERE</span> id <span class="operator">=</span> old.postId); </span><br><span class="line"><span class="keyword">UPDATE</span> post <span class="keyword">SET</span> likeNum <span class="operator">=</span> <span class="variable">@likenum</span> <span class="operator">-</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> old.postId;</span><br><span class="line">ENDd <span class="operator">=</span> new.postId;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>在给评论点赞/撤销赞时更新评论的点赞量：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> addCommentLikeNum</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> like2comment</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@likenum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> likeNum <span class="keyword">from</span> `comment` <span class="keyword">WHERE</span> id <span class="operator">=</span> new.commentId); </span><br><span class="line"><span class="keyword">UPDATE</span> `comment` <span class="keyword">SET</span> likeNum <span class="operator">=</span> <span class="variable">@likenum</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> new.commentId;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> delCommentLikeNum</span><br><span class="line">BEFORE <span class="keyword">DELETE</span> <span class="keyword">ON</span> like2comment</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@likenum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> likeNum <span class="keyword">from</span> `comment` <span class="keyword">WHERE</span> id <span class="operator">=</span> old.commentId); </span><br><span class="line"><span class="keyword">UPDATE</span> `comment` <span class="keyword">SET</span> likeNum <span class="operator">=</span> <span class="variable">@likenum</span> <span class="operator">-</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> old.commentId;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>帖子下发表/删除评论更新帖子的评论量:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> addCommentNum</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> `comment`</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@commentnum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> commentNum <span class="keyword">from</span> post <span class="keyword">WHERE</span> id <span class="operator">=</span> new.replyPostId);</span><br><span class="line">IF new.replyCommentId <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span><br><span class="line"> <span class="keyword">UPDATE</span> post <span class="keyword">SET</span> commentNum <span class="operator">=</span> <span class="variable">@commentnum</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> new.replyPostId;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> delCommentNum</span><br><span class="line">BEFORE <span class="keyword">DELETE</span> <span class="keyword">ON</span> `comment`</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@commentnum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> commentNum <span class="keyword">from</span> post <span class="keyword">WHERE</span> id <span class="operator">=</span> old.replyPostId);</span><br><span class="line">IF old.replyCommentId <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span><br><span class="line"> <span class="keyword">UPDATE</span> post <span class="keyword">SET</span> commentNum <span class="operator">=</span> <span class="variable">@commentnum</span> <span class="operator">-</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> old.replyPostId;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<p>评论下增加评论时更新评论的评论量:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> addCommentNum2Comment</span><br><span class="line">AFTER <span class="keyword">INSERT</span> <span class="keyword">ON</span> `comment`</span><br><span class="line"><span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="type">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@commentnum</span> :<span class="operator">=</span> (<span class="keyword">SELECT</span> commentNum <span class="keyword">from</span> `comment` <span class="keyword">WHERE</span> new.replyCommentId <span class="keyword">is</span></span><br><span class="line"><span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">and</span> id <span class="operator">=</span> new.replyCommentId);</span><br><span class="line">IF <span class="variable">@commentnum</span> <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span></span><br><span class="line"> <span class="keyword">UPDATE</span> `comment` <span class="keyword">SET</span> commentNum <span class="operator">=</span> <span class="variable">@commentnum</span> <span class="operator">+</span> <span class="number">1</span> <span class="keyword">WHERE</span> id <span class="operator">=</span></span><br><span class="line">new.replyCommentId;</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<h2 id="七、总结"><a href="#七、总结" class="headerlink" title="七、总结"></a>七、总结</h2><p><strong>YuKi</strong>：</p>
<p>与爱同航从第四周开始起步，一直到十六周堂堂完结，这一路上有太多的心血，太多的收获和感动。在这将近三个月的时间中，与爱同航从立项开始到如今已经长成了参天大树，而我们三个也在开发网站的过程中收获了知识。</p>
<p>那么与爱同航是怎么诞生的呢？我还记得是一天晚上闲逛，杨博文跟我说，要不咱数据库做一个恋爱交友网站，解决一下我的个人问题，我一想这挺好啊，既做了作业又有了女朋友，这不是一举两得吗。于是欣然应允。所以与爱同航是带着大家的期望和一点小小的私心诞生的。</p>
<p>于是每周约研讨室的日子开始了。让我印象比较深的是第一次开会<strong>大家分析需求和设计表</strong>。大家调研了多种恋爱软件，列出我们的需求，并且根据数据库表的格式进行优化，并且最终生成了设计文档。而我觉得这是我们开发过程目标比较明确的原因。万事开头难，一定要从开头就设计好。</p>
<p>我们的核心机制是<strong>灵魂匹配功能</strong>，大家为了这个功能也做了很多的调研，最终决定了根据兴趣标签，使用带权重的杰卡德相似度算法来进行推荐，做出了很好的效果。</p>
<p>与爱同航是我们我们三个人第一次一起开发的网站，我们都对此投入了足够的热诚，我相信，在我们的心里与爱同航已经不是作为一个作业存在了，而是个人生涯中的一个里程碑和记忆中浓墨重彩的一笔。</p>
<p>最后非常感谢刘瑞老师的教导和助教的帮助。以一首诗作结吧：<strong>新故相推书画卷，丹青妙手向翠峰</strong>。希望与爱同航帮助更多的人获得幸福！</p>
<p><strong>Yang</strong>：</p>
<p>从9.12号建群，到12.24号我在进行最后的系统文档审查，这一路走来的确经历了太多，我们应当算启动的较早的组，在第四周很多人没组好队时我们就已经勾搭上了，然而还是开发到了ddl前的最后一天。</p>
<p>开发过程中，由于和开发组的另外二位都是一起并肩作战过的老熟人了，因此彼此交流比较顺畅，想法思路也比较一致，我们花的最多的时间是在<strong>前期准备</strong>上，从为整活提出恋爱交友网站开始，到认真起来去分析功能，设计数据库，再到进行开发时间规划安排，将功能和数据库整理成文档，再到购买服务器配置开发环境，编写接口文档，这一切的一切已经接近于实际的开发流程，事实同样证明，<strong>好的准备是成功的一半</strong>，在后续的开发过程中，除了大家第一次写Vue代码时遇到的细小问题，几乎没有出现过其他问题。在提交时我也会一同附上所有文档。</p>
<p>本网站的功能类似大多数交友网站，在其基础上增加了自己的创新，无论如何，本网站共计JAVA(3800)+CSS(600)+JS(500)+Vue(9200)+Xml(300)约1万5千行源码，加上各类设计报告与文档，Gitee上共提交200余次，主楼研讨室每月每人都会约满，可以说它占据了我们大三上的大部分时间(和编译五五开吧)，投入了彼此最宝贵的心血，诚然该网站还有许多值得优化之处，但对于一份数据库大作业而言，我对最后成果满意到无以复加。</p>
<p>要说经历此次开发我收获最大的是什么，那便是团队合作中交流的重要性，以前在六系都是一个人(和jkm)单打独斗，借由数据库课程第一次亲身参与了团队开发，也理解了计算机人不只是需要Coding能力，交流能力也同样关键。最后感谢苗姐与宇骏的辛苦付出，<strong>旅途总有终点</strong>，希望我们还有下次合作的机会，respect了家人们。</p>
<p>在后续我们会将网站部署到公网，希望（也许）能够帮助大家找到真爱。</p>
<p><strong>MorningTxT</strong>：</p>
<p>从9.24在gitee上成立仓库，到10.29开始正式的登录注册页面编写，再到12.23微调结束、彻底收尾，数据库大作业也像过山车一样，进度忽快忽慢，方向忽上忽下，然而柳暗花明，过山车也终于平稳落地。</p>
<p>以评论区的开发为例。虽然在最初就已经确定了需要实现二级评论功能，但真正实践起来，却是一波三折。第一次我先是自己手搓了一个丑丑的评论区，但因为没有参考，各大网站的实现方法八仙过海，令我在排版布局和实际功能实现的时候也顾左顾右，进度缓慢。某一天突发奇想，直接在百度上搜索vue3中的评论区实现，找到了一个名为 Undraw UI 的组件库，其中完美地实现了评论区的丰富功能，令人大喜过望，我们立即将其投入到自己的网站中使用。然而好景不长，先是发现由于该组件集成度太高，数据的输入输出高度规范化，列表套列表的复杂结构给后端同学带来了不小的压力；中间又发现了该组件的 bug ，在QQ群中给开发者提供反馈；后是在消息功能的实现中，发现该组件无法获得 回复/点赞 对应的原评论，而这是实现消息功能的基石。于是开始第三遍的评论区重写，以 Undraw UI 的排版布局为参考，实现了点击聚焦评论框、点击弹出评论框、回复对象昵称高亮、最新/最热排序等特色功能。在此之后，还经历了评论换行符的错误显示等小小风波。不过努力终有回报，在消息界面跳转到原内容的实现上，通过给每条评论增加锚点的方式，成功实现了对应位置的跳转滑动，成果喜人。</p>
<p>相较于其他组的手忙脚乱，我很高兴能和两位有热情、负责任、有能力的优秀同学一起合作，齐心合作、深入讨论、互相勉励，将学期初的宏伟蓝图落地为美观使用的具体项目，经历了一次愉快的团队开发。</p>
<p>在此，由衷地感谢组内每一个成员，没有他们的辛苦付出，也没有我们今天的成功；也感谢老师和助教的大力支持，我们希望能得到你们的认可，为本课程画上一个完美的句号。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://YangYzzzz.github.io">Yang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://yangyzzzz.github.io/post/67d293db.html">https://yangyzzzz.github.io/post/67d293db.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://YangYzzzz.github.io" target="_blank">Yang's CS World</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F/">数据库系统</a><a class="post-meta__tags" href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/">软件工程</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/">前后端开发</a></div><div class="post_share"><div class="social-share" data-image="/img/91942417_p0_master1800.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/c0060df1.html" title="『计算机网络』计算机网络理论——期末复习"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/122961566_p1_master1200.jpeg" onerror="onerror=null;src='/img/404.jpeg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">『计算机网络』计算机网络理论——期末复习</div></div></a></div><div class="next-post pull-right"><a href="/post/5146ab18.html" title="『数据库系统』与爱同航——系统设计文档"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/123104663_p0_master1200.jpeg" onerror="onerror=null;src='/img/404.jpeg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">『数据库系统』与爱同航——系统设计文档</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/5146ab18.html" title="『数据库系统』与爱同航——系统设计文档"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/123104663_p0_master1200.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-10-12</div><div class="title">『数据库系统』与爱同航——系统设计文档</div></div></a></div><div><a href="/post/cef0ace1.html" title="『软件工程』EPP小组软工感想"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/116096768_p0_master1200.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-07-10</div><div class="title">『软件工程』EPP小组软工感想</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Yang</div><div class="author-info__description">友链请私戳我</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">51</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">20</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">14</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/YangYzzzz"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/YangYzzzz" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:21373037@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="https://blog.csdn.net/weixin_71968907" target="_blank" title="CSDN"><i class="fa fa-book-open"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">青山依旧在，几度夕阳红</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E3%80%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E3%80%8F%E4%B8%8E%E7%88%B1%E5%90%8C%E8%88%AA%E2%80%94%E2%80%94%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3"><span class="toc-number">1.</span> <span class="toc-text">『数据库系统』与爱同航——系统实现文档</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%9E%E7%8E%B0%E6%96%87%E6%A1%A3"><span class="toc-number">2.</span> <span class="toc-text">系统实现文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%AE%9E%E7%8E%B0%E7%8E%AF%E5%A2%83"><span class="toc-number">2.1.</span> <span class="toc-text">一、实现环境</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E5%AE%A2%E6%88%B7%E7%AB%AF%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.1 客户端环境依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96"><span class="toc-number">2.1.2.</span> <span class="toc-text">1.2 服务器端环境依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%A0%88"><span class="toc-number">2.1.3.</span> <span class="toc-text">1.3 项目技术栈</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E9%A1%B9%E7%9B%AE%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text">二、项目文件结构</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%8A%9F%E8%83%BD%E6%9E%B6%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">三、功能架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%81%B5%E9%AD%82%E5%8C%B9%E9%85%8D"><span class="toc-number">2.3.1.</span> <span class="toc-text">3.1 灵魂匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E7%94%A8%E6%88%B7%E4%B8%AD%E5%BF%83"><span class="toc-number">2.3.2.</span> <span class="toc-text">3.2 用户中心</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%8F%91%E5%B8%83%E5%B8%96%E5%AD%90-%E7%85%A7%E7%89%87"><span class="toc-number">2.3.3.</span> <span class="toc-text">3.3 发布帖子&#x2F;照片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E5%B8%96%E5%AD%90%E8%AF%A6%E6%83%85"><span class="toc-number">2.3.4.</span> <span class="toc-text">3.4 帖子详情</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E6%B6%88%E6%81%AF"><span class="toc-number">2.3.5.</span> <span class="toc-text">3.5 消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E7%99%BB%E9%99%86%E6%B3%A8%E5%86%8C"><span class="toc-number">2.3.6.</span> <span class="toc-text">3.6 登陆注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%B9%BF%E5%9C%BA"><span class="toc-number">2.3.7.</span> <span class="toc-text">3.7 广场</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E8%81%8A%E5%A4%A9"><span class="toc-number">2.3.8.</span> <span class="toc-text">3.8 聊天</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-%E5%90%8E%E5%8F%B0%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA"><span class="toc-number">2.3.9.</span> <span class="toc-text">3.9 后台数据显示</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-1-%E4%B8%BB%E9%A1%B5%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1"><span class="toc-number">2.3.9.1.</span> <span class="toc-text">3.9.1 主页信息统计</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-2-%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.9.2.</span> <span class="toc-text">3.9.2 信息管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-9-2-1-%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.9.2.1.</span> <span class="toc-text">3.9.2.1 基本信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-9-2-2-%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.3.9.2.2.</span> <span class="toc-text">3.9.2.2 可视化数据展示</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-3-%E5%85%AC%E5%91%8A%E7%AE%A1%E7%90%86"><span class="toc-number">2.3.9.3.</span> <span class="toc-text">3.9.3 公告管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-9-4-%E5%9B%BE%E7%89%87%E7%94%9F%E6%88%90%EF%BC%88Bonus%EF%BC%89"><span class="toc-number">2.3.9.4.</span> <span class="toc-text">3.9.4 图片生成（Bonus）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%85%B7%E4%BD%93%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.4.</span> <span class="toc-text">四、具体功能介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5"><span class="toc-number">2.4.1.</span> <span class="toc-text">4.1 个人主页</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8F%91%E5%B8%83%E5%B8%96%E5%AD%90-%E7%85%A7%E7%89%87"><span class="toc-number">2.4.2.</span> <span class="toc-text">4.2 发布帖子&#x2F;照片</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%B6%88%E6%81%AF"><span class="toc-number">2.4.3.</span> <span class="toc-text">4.3 消息</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E5%B8%96%E5%AD%90%E8%AF%A6%E6%83%85"><span class="toc-number">2.4.4.</span> <span class="toc-text">4.4 帖子详情</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E7%81%B5%E9%AD%82%E5%8C%B9%E9%85%8D"><span class="toc-number">2.4.5.</span> <span class="toc-text">4.5 灵魂匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.6.</span> <span class="toc-text">4.6 用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-1-%E7%99%BB%E9%99%86%E7%95%8C%E9%9D%A2"><span class="toc-number">2.4.6.1.</span> <span class="toc-text">4.6.1 登陆界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-2-%E6%B3%A8%E5%86%8C%E7%95%8C%E9%9D%A2"><span class="toc-number">2.4.6.2.</span> <span class="toc-text">4.6.2 注册界面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-3-%E5%85%B4%E8%B6%A3%E6%A0%87%E7%AD%BE%E9%80%89%E6%8B%A9"><span class="toc-number">2.4.6.3.</span> <span class="toc-text">4.6.3 兴趣标签选择</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E5%B9%BF%E5%9C%BA"><span class="toc-number">2.4.7.</span> <span class="toc-text">4.7 广场</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-%E8%81%8A%E5%A4%A9"><span class="toc-number">2.4.8.</span> <span class="toc-text">4.8 聊天</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-%E5%90%8E%E7%AB%AF%E6%95%B0%E6%8D%AE%E6%98%BE%E7%A4%BA"><span class="toc-number">2.4.9.</span> <span class="toc-text">4.9 后端数据显示</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-1-%E7%BD%91%E7%AB%99%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.4.9.1.</span> <span class="toc-text">4.9.1 网站数据展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-2-%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.</span> <span class="toc-text">4.9.2 信息管理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.1.</span> <span class="toc-text">用户信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%96%E5%AD%90%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.2.</span> <span class="toc-text">帖子信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9B%BE%E7%89%87%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.3.</span> <span class="toc-text">图片信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.4.</span> <span class="toc-text">标签信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E4%BA%A4%E5%8F%8B%E4%BF%A1%E6%81%AF%E7%AE%A1%E7%90%86"><span class="toc-number">2.4.9.2.5.</span> <span class="toc-text">匹配交友信息管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E8%A1%8C%E4%B8%BA%E8%BF%BD%E8%B8%AA"><span class="toc-number">2.4.9.2.6.</span> <span class="toc-text">用户行为追踪</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-3-%E5%8F%AF%E8%A7%86%E5%8C%96%E6%95%B0%E6%8D%AE%E5%B1%95%E7%A4%BA"><span class="toc-number">2.4.9.3.</span> <span class="toc-text">4.9.3 可视化数据展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-4-%E5%8F%91%E5%B8%83%E7%AE%A1%E7%90%86%E5%91%98%E5%85%AC%E5%91%8A"><span class="toc-number">2.4.9.4.</span> <span class="toc-text">4.9.4 发布管理员公告</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-9-5-%E8%83%8C%E6%99%AF%E7%94%9F%E6%88%90"><span class="toc-number">2.4.9.5.</span> <span class="toc-text">4.9.5 背景生成</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E9%83%A8%E5%88%86%E6%BA%90%E4%BB%A3%E7%A0%81%E8%AF%B4%E6%98%8E"><span class="toc-number">2.5.</span> <span class="toc-text">五、部分源代码说明</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%81%8A%E5%A4%A9%E5%8A%9F%E8%83%BD%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.5.1.</span> <span class="toc-text">5.1 聊天功能代码实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%B9%BF%E5%9C%BA%E7%9A%84%E9%80%89%E6%8B%A9%E5%92%8C%E7%AD%9B%E9%80%89%E5%B8%96%E5%AD%90%E5%8A%9F%E8%83%BD"><span class="toc-number">2.5.2.</span> <span class="toc-text">5.2  广场的选择和筛选帖子功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E7%B3%BB%E7%BB%9F%E9%87%8D%E8%A6%81%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.</span> <span class="toc-text">六、系统重要功能实现</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E9%89%B4%E6%9D%83%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.6.1.</span> <span class="toc-text">6.1 鉴权实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1-%E6%9C%AC%E5%9C%B0%E4%BF%9D%E5%AD%98%E7%99%BB%E5%BD%95%E4%BF%A1%E6%81%AF"><span class="toc-number">2.6.1.1.</span> <span class="toc-text">6.1.1 本地保存登录信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2-%E8%B7%AF%E7%94%B1%E5%AE%88%E6%8A%A4"><span class="toc-number">2.6.1.2.</span> <span class="toc-text">6.1.2 路由守护</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E6%8E%A8%E8%8D%90%E7%AE%97%E6%B3%95"><span class="toc-number">2.6.2.</span> <span class="toc-text">6.2 推荐算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-number">2.6.3.</span> <span class="toc-text">6.3 文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1%E5%8C%B9%E9%85%8D"><span class="toc-number">2.6.4.</span> <span class="toc-text">6.4 动态路由匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="toc-number">2.6.5.</span> <span class="toc-text">6.5.触发器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83%E3%80%81%E6%80%BB%E7%BB%93"><span class="toc-number">2.7.</span> <span class="toc-text">七、总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/52e1e34e.html" title="『深度学习』动手学深度学习——阅读笔记2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/123213282_p1_master1400.jpeg" onerror="this.onerror=null;this.src='/img/404.jpeg'" alt="『深度学习』动手学深度学习——阅读笔记2"/></a><div class="content"><a class="title" href="/post/52e1e34e.html" title="『深度学习』动手学深度学习——阅读笔记2">『深度学习』动手学深度学习——阅读笔记2</a><time datetime="2025-01-19T13:44:19.349Z" title="发表于 2025-01-19 21:44:19">2025-01-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/a83ff101.html" title="『信息论』信息论——学习笔记1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/119780754_p0_master1700.jpeg" onerror="this.onerror=null;this.src='/img/404.jpeg'" alt="『信息论』信息论——学习笔记1"/></a><div class="content"><a class="title" href="/post/a83ff101.html" title="『信息论』信息论——学习笔记1">『信息论』信息论——学习笔记1</a><time datetime="2024-10-30T09:46:33.000Z" title="发表于 2024-10-30 17:46:33">2024-10-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/b2db68a7.html" title="『机器学习系统』OpenMLSYS——阅读笔记2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fufu5.jpeg" onerror="this.onerror=null;this.src='/img/404.jpeg'" alt="『机器学习系统』OpenMLSYS——阅读笔记2"/></a><div class="content"><a class="title" href="/post/b2db68a7.html" title="『机器学习系统』OpenMLSYS——阅读笔记2">『机器学习系统』OpenMLSYS——阅读笔记2</a><time datetime="2024-10-29T12:14:02.000Z" title="发表于 2024-10-29 20:14:02">2024-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/d00a62b9.html" title="『机器学习系统』OpenMLSYS——阅读笔记1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fufu2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpeg'" alt="『机器学习系统』OpenMLSYS——阅读笔记1"/></a><div class="content"><a class="title" href="/post/d00a62b9.html" title="『机器学习系统』OpenMLSYS——阅读笔记1">『机器学习系统』OpenMLSYS——阅读笔记1</a><time datetime="2024-10-29T12:14:00.000Z" title="发表于 2024-10-29 20:14:00">2024-10-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/866b08a7.html" title="『深度学习』动手学深度学习——阅读笔记1"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/123182059_p0_master1200.jpeg" onerror="this.onerror=null;this.src='/img/404.jpeg'" alt="『深度学习』动手学深度学习——阅读笔记1"/></a><div class="content"><a class="title" href="/post/866b08a7.html" title="『深度学习』动手学深度学习——阅读笔记1">『深度学习』动手学深度学习——阅读笔记1</a><time datetime="2024-10-29T10:04:51.000Z" title="发表于 2024-10-29 18:04:51">2024-10-29</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Yang</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">You are not too early，you are not too late，you are very much on time in your time zone</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat-btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="/js/tw_cn.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      tags: 'ams'
    },
    chtml: {
      scale: 1.1
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, '']
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typesetPromise()
}</script><script>(() => {
  const initGitalk = () => {
    const gitalk = new Gitalk(Object.assign({
      clientID: 'Ov23liK7Xv2gk4Mj8hqI',
      clientSecret: 'a380272ec98afefe58e4fdfacaa66c9eb159e415',
      repo: 'BlogComment',
      owner: 'YangYzzzz',
      admin: ['YangYzzzz'],
      id: 'f6b27c0ed74f223c005a8a7c314b1edf',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  const loadGitalk = async() => {
    if (typeof Gitalk === 'function') initGitalk()
    else {
      await getCSS('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css')
      await getScript('https://cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js')
      initGitalk()
    }
  }
  
  const commentCount = n => {
    const isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
    if (isCommentCount) {
      isCommentCount.textContent= n
    }
  }

  if ('Gitalk' === 'Gitalk' || !false) {
    if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
    else loadGitalk()
  } else {
    window.loadOtherComment = loadGitalk
  }
})()</script></div><canvas id="universe"></canvas><script defer src="/js/universe.js"></script><div class="aplayer no-destroy" data-id="2108205877" data-server="netease" data-type="playlist" data-fixed="true" data-autoplay="true"> </div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/click-heart.min.js" async="async" mobile="true"></script><script>(() => {
  const isChatBtn = true
  const isChatHideShow = false

  if (isChatBtn) {
    const close = () => {
      Chatra('minimizeWidget')
      Chatra('hide')
    }

    const open = () => {
      Chatra('openChat', true)
      Chatra('show')
    }

    window.ChatraSetup = {
      startHidden: true
    }
  
    window.chatBtnFn = () => {
      const isShow = document.getElementById('chatra').classList.contains('chatra--expanded')
      isShow ? close() : open()
    }
  } else if (isChatHideShow) {
    window.chatBtn = {
      hide: () => {
        Chatra('hide')
      },
      show: () => {
        Chatra('show')
      }
    }
  }

  (function(d, w, c) {
    w.ChatraID = 'Xjgb72cDfiFJXzFty'
    var s = d.createElement('script')
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments)
    }
    s.async = true
    s.src = 'https://call.chatra.io/chatra.js'
    if (d.head) d.head.appendChild(s)
  })(document, window, 'Chatra')

})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/metingjs/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.13.0"></script></div></div></body></html>